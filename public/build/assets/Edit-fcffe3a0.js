import{i as T,A as U,K as N,M as A,d as R,o as a,c as l,v as _,t as n,e as t,E as h,L as G,q as o,F as c,f as m,h as p,G as y,I}from"./app-1d827472.js";import{u as K}from"./categories-0852dc16.js";import{u as Z}from"./posts-79cf4708.js";import{d as L,u as $,a as g,r as j,m as J}from"./rules-1dfda01e.js";import{_ as O}from"./TextEditorComponent-1f1ec3a5.js";import{D as Q}from"./DropZone-7ced32a9.js";import"./_plugin-vue_export-helper-c27b6911.js";const W={class:"row my-5"},X={class:"col-md-8"},Y={class:"card border-0 shadow-sm"},tt={class:"card-body"},et={class:"mb-3"},st=t("label",{for:"post-title",class:"form-label"}," Title ",-1),ot={class:"text-danger mt-1"},at={class:"text-danger mt-1"},lt={class:"mb-3"},it=t("label",{for:"post-content",class:"form-label"}," Content ",-1),nt={class:"text-danger mt-1"},dt={class:"text-danger mt-1"},rt={class:"col-md-4"},ct={class:"card border-0 shadow-sm"},ut={class:"card-body"},mt=t("h6",null,[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-square",viewBox:"0 0 16 16"},[t("path",{"fill-rule":"evenodd",d:"M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm8.5 2.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V4.5z"})]),_(" Action ")],-1),_t={class:"mt-3 text-center"},vt=["disabled"],ht={class:""},pt={key:0},gt={key:1},bt=["disabled"],ft={class:""},wt={key:0},Vt={key:1},xt=t("h6",{class:"mt-3"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-square",viewBox:"0 0 16 16"},[t("path",{"fill-rule":"evenodd",d:"M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm8.5 2.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V4.5z"})]),_(" Category ")],-1),yt={class:"mb-3"},Lt={class:"text-danger mt-1"},Mt={class:"text-danger mt-1"},qt={class:"mb-3"},zt=t("h6",{class:"mt-3"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-square",viewBox:"0 0 16 16"},[t("path",{"fill-rule":"evenodd",d:"M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm8.5 2.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V4.5z"})]),_(" Thumbnail ")],-1),Ct={class:"text-danger mt-1"},Ut={__name:"Edit",setup(kt){L("required",j),L("min",J);const M={title:"required|min:5",content:"required|min:50",categories:"required"},{validate:q,errors:v,resetForm:Bt}=$({validationSchema:M}),{value:z}=g("title",null,{initialValue:""}),{value:C}=g("content",null,{initialValue:""}),{value:k}=g("categories",null,{initialValue:"",label:"category"}),{categoryList:B,getCategoryList:D}=K(),{post:r,getPost:F,updatePost:H,validationErrors:u,isLoading:d}=Z(),s=T({title:z,content:C,categories:k,thumbnail:""}),P=U();function S(){q().then(b=>{b.valid&&H(s)})}return N(()=>{F(P.params.id),D()}),A(()=>{s.id=r.value.id,s.title=r.value.title,s.content=r.value.content,s.thumbnail=r.value.original_image,s.categories=r.value.categories}),(b,i)=>{var f,w,V,x;const E=R("v-select");return a(),l(c,null,[_(n(s)+" ",1),t("form",{onSubmit:I(S,["prevent"])},[t("div",W,[t("div",X,[t("div",Y,[t("div",tt,[t("div",et,[st,h(t("input",{"onUpdate:modelValue":i[0]||(i[0]=e=>s.title=e),id:"post-title",type:"text",class:"form-control"},null,512),[[G,s.title]]),t("div",ot,n(o(v).title),1),t("div",at,[(a(!0),l(c,null,m((f=o(u))==null?void 0:f.title,e=>(a(),l("div",null,n(e),1))),256))])]),t("div",lt,[it,p(O,{modelValue:s.content,"onUpdate:modelValue":i[1]||(i[1]=e=>s.content=e)},null,8,["modelValue"]),t("div",nt,n(o(v).content),1),t("div",dt,[(a(!0),l(c,null,m((w=o(u))==null?void 0:w.content,e=>(a(),l("div",null,n(e),1))),256))])])])])]),t("div",rt,[t("div",ct,[t("div",ut,[mt,t("div",_t,[t("button",{disabled:o(d),class:"btn btn btn-outline-primary me-2"},[h(t("div",ht,null,512),[[y,o(d)]]),o(d)?(a(),l("span",pt,"Processing...")):(a(),l("span",gt,"Save Draft"))],8,vt),t("button",{disabled:o(d),class:"btn btn-primary"},[h(t("div",ft,null,512),[[y,o(d)]]),o(d)?(a(),l("span",wt,"Processing...")):(a(),l("span",Vt,"Publish"))],8,bt)]),xt,t("div",yt,[p(E,{multiple:"",modelValue:s.categories,"onUpdate:modelValue":i[2]||(i[2]=e=>s.categories=e),options:o(B),reduce:e=>e.id,label:"name",class:"form-control",placeholder:"Select category"},null,8,["modelValue","options","reduce"]),t("div",Lt,n(o(v).categories),1),t("div",Mt,[(a(!0),l(c,null,m((V=o(u))==null?void 0:V.categories,e=>(a(),l("div",null,n(e),1))),256))])]),t("div",qt,[zt,p(Q,{modelValue:s.thumbnail,"onUpdate:modelValue":i[3]||(i[3]=e=>s.thumbnail=e)},null,8,["modelValue"]),t("div",Ct,[(a(!0),l(c,null,m((x=o(u))==null?void 0:x.thumbnail,e=>(a(),l("div",null,n(e),1))),256))])])])])])])],32)],64)}}};export{Ut as default};
