import{o as l,c as r,e as t,t as _,E as b,aw as B,q as d,ao as F,F as w,f as k,I as C,i as j,A as G,ax as V,p as A,K,M as z,L as H,h as J,G as Q}from"./app-1d827472.js";import{u as W}from"./roles-0a24af2f.js";import{d as E,u as X,a as Y,r as Z,m as ee}from"./rules-1dfda01e.js";import{_ as te}from"./_plugin-vue_export-helper-c27b6911.js";const ae={class:"container"},se=["value"],ie={class:"middle"},ne=["value"],oe={__name:"DualListBox",props:{leftLabel:{type:String,required:!0},rightLabel:{type:String,required:!0},leftData:{type:Array,required:!0},rightData:{type:Array,required:!0}},emits:["onChangeList"],setup(P,{emit:n}){let s=[],i=[];const g=n,a=P;function x(){if(!i.length)return;for(let e=i.length;e>0;e--){let u=a.rightData.indexOf(i[e-1]);a.rightData.splice(u,1),a.leftData.push(i[e-1]),i.pop()}let c=a.leftData,o=a.rightData;g("onChangeList",{leftData:c,rightData:o})}function D(){if(!s.length)return;for(let e=s.length;e>0;e--){let u=a.leftData.indexOf(s[e-1]);a.leftData.splice(u,1),a.rightData.push(s[e-1]),s.pop()}let c=a.leftData,o=a.rightData;g("onChangeList",{leftData:c,rightData:o})}return(c,o)=>(l(),r("div",ae,[t("div",null,[t("h2",null,_(a.leftLabel),1),b(t("select",{class:"form-select",multiple:"","onUpdate:modelValue":o[0]||(o[0]=e=>F(s)?s.value=e:s=e),onDblclick:D},[(l(!0),r(w,null,k(a.leftData,(e,u)=>(l(),r("option",{value:e,key:e.id},_(e.name),9,se))),128))],544),[[B,d(s)]])]),t("div",ie,[t("button",{class:"btn btn-primary",onClick:C(D,["prevent"])},"=>"),t("button",{class:"btn btn-primary",onClick:C(x,["prevent"])},"<=")]),t("div",null,[t("h2",null,_(a.rightLabel),1),b(t("select",{class:"form-select",multiple:"","onUpdate:modelValue":o[1]||(o[1]=e=>F(i)?i.value=e:i=e),onDblclick:x},[(l(!0),r(w,null,k(a.rightData,(e,u)=>(l(),r("option",{value:e,key:e.id},_(e.name),9,ne))),128))],544),[[B,d(i)]])])]))}},le=te(oe,[["__scopeId","data-v-7911267c"]]),re={class:"row justify-content-center my-5"},de={class:"col"},ce={class:"card border-0 shadow-sm"},ue={class:"card-body"},me={class:"mb-3"},pe=t("label",{for:"post-title",class:"form-label"}," Title ",-1),_e={class:"form-outline w-25"},fe={class:"text-danger mt-1"},he={class:"text-danger mt-1"},ve={class:"mt-4"},ge=["disabled"],De={class:""},be={key:0},xe={key:1},Ce={__name:"Edit",async setup(P){let n,s;E("required",Z),E("min",ee);const i={name:"required|min:3"},{validate:g,errors:a,resetForm:x}=X({validationSchema:i}),{value:D}=Y("name",null,{initialValue:""}),{role:c,updateRolePermissions:o,getRole:e,updateRole:u,validationErrors:M,isLoading:y}=W(),f=j({name:D}),S=G();let L=([n,s]=V(()=>axios.get("/api/permissions/")),n=await n,s(),n),U=L.data.data;L=([n,s]=V(()=>axios.get("/api/role-permissions/"+S.params.id)),n=await n,s(),n);let q=L.data.data,O=T(U,q),$=A(O),R=A(q);function I(){g().then(h=>{if(h.valid){let m=R.value.map(p=>p.id);o(f,m)}})}function N(h){}K(()=>{e(S.params.id)}),z(()=>{f.id=c.value.id,f.name=c.value.name});function T(h,m){return h.filter(p=>!m.some(v=>p.id===v.id))}return(h,m)=>{var p;return l(),r("div",re,[t("div",de,[t("div",ce,[t("div",ue,[t("form",{onSubmit:C(I,["prevent"])},[t("div",me,[pe,t("div",_e,[b(t("input",{"onUpdate:modelValue":m[0]||(m[0]=v=>f.name=v),id:"post-title",type:"text",class:"form-control"},null,512),[[H,f.name]])]),t("div",fe,_(d(a).name),1),t("div",he,[(l(!0),r(w,null,k((p=d(M))==null?void 0:p.name,v=>(l(),r("div",null,_(v),1))),256))])]),J(le,{leftLabel:"Available Permissions",rightLabel:"Current Permissions",leftData:d($),rightData:d(R),onOnChangeList:N},null,8,["leftData","rightData"]),t("div",ve,[t("button",{disabled:d(y),class:"btn btn-primary"},[b(t("div",De,null,512),[[Q,d(y)]]),d(y)?(l(),r("span",be,"Processing...")):(l(),r("span",xe,"Update"))],8,ge)])],32)])])])])}}};export{Ce as default};
